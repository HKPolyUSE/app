import{r as s,c as Oe,j as e}from"./client-B_pnGUEq.js";/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),je=(...n)=>n.filter((o,a,c)=>!!o&&c.indexOf(o)===a).join(" ");/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ve={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=s.forwardRef(({color:n="currentColor",size:o=24,strokeWidth:a=2,absoluteStrokeWidth:c,className:u="",children:h,iconNode:f,...v},m)=>s.createElement("svg",{ref:m,...Ve,width:o,height:o,stroke:n,strokeWidth:c?Number(a)*24/Number(o):a,className:je("lucide",u),...v},[...f.map(([g,p])=>s.createElement(g,p)),...Array.isArray(h)?h:[h]]));/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d=(n,o)=>{const a=s.forwardRef(({className:c,...u},h)=>s.createElement(Fe,{ref:h,iconNode:o,className:je(`lucide-${We(n)}`,c),...u}));return a.displayName=`${n}`,a};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=d("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=d("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=d("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=d("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=d("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=d("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=d("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=d("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=d("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=d("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=d("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=d("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=d("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=d("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=d("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=d("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=d("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),le=20,ge=1e4,be=50,ye=[{id:0,type:"balanced",name:"MVP Sandbox",capacity:150,specs:"2 vCPU / 4GB RAM",cost:0,maintenance:400,cpuMult:1,memMult:1},{id:1,type:"balanced",name:"Standard Rack",capacity:400,specs:"8 vCPU / 16GB RAM",cost:2500,maintenance:1200,cpuMult:1,memMult:1},{id:2,type:"compute",name:"Compute Pro",capacity:450,specs:"16 vCPU / 8GB RAM",cost:2800,maintenance:1400,cpuMult:.6,memMult:1.5},{id:3,type:"memory",name:"Memory Vault",capacity:450,specs:"4 vCPU / 32GB RAM",cost:2800,maintenance:1400,cpuMult:1.5,memMult:.6},{id:4,type:"balanced",name:"Enterprise Mainframe",capacity:2e3,specs:"64 vCPU / 256GB RAM",cost:12e3,maintenance:6e3,cpuMult:1,memMult:1}],ve={1:{event:"The MVP Launch",context:"Byte-Bites is live! The load is balanced, but the API logic is fresh and unoptimized.",webMult:1.2,dbMult:.8},5:{event:"Weekend Surge",context:"Pizza orders are flying in. High write-volume on the DB tier!",webMult:1,dbMult:1.8},10:{event:"Viral Marketing",context:"Millions are browsing menus. The Web CPU is redlining from search requests!",webMult:2.2,dbMult:.9},15:{event:"Global Scale",context:"Massive sustained load on all tiers. No room for error.",webMult:1.5,dbMult:1.5}},it="",we=async n=>{var u,h,f,v,m;const o=`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${it}`,a={contents:[{parts:[{text:n}]}]},c=[1e3,2e3,4e3,8e3,16e3];for(let g=0;g<=5;g++)try{const p=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!p.ok)throw new Error(`HTTP error! status: ${p.status}`);return((m=(v=(f=(h=(u=(await p.json()).candidates)==null?void 0:u[0])==null?void 0:h.content)==null?void 0:f.parts)==null?void 0:v[0])==null?void 0:m.text)||"No response generated."}catch(p){if(g===5)throw p;await new Promise(N=>setTimeout(N,c[g]))}};function ct(n){return 25+Math.floor(n*1.5)}function dt({crashes:n,activeUsers:o,budget:a}){const c=a<=0;return!c&&o>=1200&&n===0?{grade:"S",style:"The Hardware Whisperer",color:"text-emerald-600",causal:"Perfectly timed upgrades. You pushed vertical scaling to its absolute limit without dropping a single order."}:!c&&o>=800?{grade:"A",style:"Solid Sysadmin",color:"text-indigo-600",causal:"Good scaling and survival instincts. You managed the downtime well and kept the business afloat."}:!c&&o>200?{grade:"C",style:"Survivalist",color:"text-amber-600",causal:"You survived the monolith, but struggled with load. Your customers experienced heavy lag, capping growth."}:{grade:"F",style:"Kitchen Nightmare",color:"text-rose-600",causal:"The server melted down. Whether through bankruptcy or complete unresponsiveness, the monolith collapsed under pressure."}}function $({title:n,children:o,onClose:a,icon:c,footer:u}){return e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[100] bg-slate-900 bg-opacity-60 backdrop-blur-md p-4 antialiased font-sans text-black",children:e.jsxs("div",{className:"bg-white rounded-[1.5rem] md:rounded-[2rem] shadow-2xl max-w-[90vw] md:max-w-lg w-full overflow-hidden border border-slate-100 relative text-center",children:[e.jsx("button",{onClick:a,className:"absolute top-4 right-4 w-8 h-8 flex items-center justify-center rounded-full hover:bg-slate-100 text-slate-400 hover:text-slate-600 transition-colors z-20",children:e.jsx(lt,{size:20})}),e.jsxs("div",{className:"p-6 md:p-8",children:[c&&e.jsx("div",{className:"text-5xl md:text-6xl mb-4 flex justify-center",children:c}),e.jsx("h2",{className:"text-[16px] md:text-[18px] font-normal text-black mb-3 uppercase tracking-wide",children:n}),e.jsx("div",{className:"mb-6 md:mb-8 leading-relaxed text-[14px] sm:text-[18px] text-black font-normal",children:o}),u||e.jsx("button",{onClick:a,className:"w-full py-3 md:py-4 bg-slate-900 text-white rounded-xl font-normal text-[16px] md:text-[18px] hover:bg-slate-800 transition-all shadow-lg active:scale-[0.98]",children:"Proceed"})]})]})})}const xt=({onStart:n})=>e.jsx("div",{className:"h-screen w-full bg-white flex flex-col items-center justify-center font-sans text-black selection:bg-indigo-100 overflow-hidden px-4 sm:px-12 py-4 text-black",children:e.jsxs("div",{className:"max-w-4xl w-full h-full max-h-[900px] flex flex-col items-center justify-center text-center",children:[e.jsx("h1",{className:"text-[22px] sm:text-[34px] md:text-[42px] font-normal tracking-tight mb-1 sm:mb-2 uppercase tracking-widest",children:"Byte-Bites Phase 1: The Monolith"}),e.jsx("p",{className:"text-[14px] sm:text-[18px] text-slate-500 mb-4 sm:mb-10 italic flex-shrink-0",children:"Welcome to the Kitchen."}),e.jsxs("div",{className:"bg-slate-50 border border-slate-100 rounded-[1.5rem] sm:rounded-[2rem] p-5 sm:p-8 mb-4 sm:mb-10 text-left w-full shadow-sm flex-shrink min-h-0 overflow-y-auto",children:[e.jsx("p",{className:"text-[14px] sm:text-[16px] leading-relaxed mb-4",children:"Byte-Bites is growing fast. Right now, everything runs on one single server. Monitor your capacity as word of mouth spreads."}),e.jsxs("p",{className:"text-[14px] sm:text-[16px] leading-relaxed mb-6",children:[e.jsx("strong",{children:"Your Mission:"})," Survive 20 rounds of viral surges using specialized hardware configuration paths."]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"flex flex-col gap-1 sm:gap-2 text-black",children:[e.jsx("div",{className:"text-[18px] sm:text-[24px]",children:"ðŸ“ˆ"}),e.jsx("h3",{className:"font-normal uppercase text-[13px] sm:text-[15px]",children:"Monitor Load"}),e.jsx("p",{className:"text-[12px] sm:text-[14px] text-slate-600 leading-snug",children:"Watch the server capacity. If it hits 100%, orders fail and stability drops."})]}),e.jsxs("div",{className:"flex flex-col gap-1 sm:gap-2 text-black",children:[e.jsx("div",{className:"text-[18px] sm:text-[24px]",children:"âš™ï¸"}),e.jsx("h3",{className:"font-normal uppercase text-[13px] sm:text-[15px]",children:"Config Hardware"}),e.jsx("p",{className:"text-[12px] sm:text-[14px] text-slate-600 leading-snug",children:"Choose between Balanced, Compute, or Memory focused server nodes."})]}),e.jsxs("div",{className:"flex flex-col gap-1 sm:gap-2 text-black",children:[e.jsx("div",{className:"text-[18px] sm:text-[24px]",children:"ðŸ’°"}),e.jsx("h3",{className:"font-normal uppercase text-[13px] sm:text-[15px]",children:"Manage Capital"}),e.jsx("p",{className:"text-[12px] sm:text-[14px] text-slate-600 leading-snug",children:"Upgrades require downtime and cost money. Round expenses occur even if down!"})]})]})]}),e.jsx("button",{onClick:n,className:"flex-shrink-0 px-8 sm:px-12 py-3 sm:py-5 bg-indigo-600 text-white rounded-[1.25rem] sm:rounded-[1.5rem] font-normal text-[16px] sm:text-[20px] hover:bg-indigo-700 hover:scale-105 active:scale-95 transition-all shadow-xl shadow-indigo-200",children:"Start Phase 1 Simulation"})]})});function mt(){const[n,o]=s.useState("overview"),[a,c]=s.useState(1),[u,h]=s.useState(0),[f,v]=s.useState(0),[m,g]=s.useState(!1),[p,N]=s.useState(0),[j,re]=s.useState(be),[H,k]=s.useState([]),[ke,A]=s.useState(!1),[Ne,z]=s.useState(!1),[Me,L]=s.useState(!1),[M,q]=s.useState(ge),[ne,O]=s.useState(null),[P,W]=s.useState(100),[T,V]=s.useState(1),[Se,F]=s.useState(""),[Ce,oe]=s.useState(!1),[Re,Z]=s.useState(!1),[ie,Y]=s.useState(""),[$e,ce]=s.useState(!1),[Ae,ze]=s.useState(320),[Le,Pe]=s.useState(350),X=s.useRef(!1),K=s.useRef(!1),de=s.useRef(null),_=s.useRef(null);s.useEffect(()=>{var t;(t=de.current)==null||t.scrollIntoView({behavior:"smooth"})},[H]);const B=s.useCallback(t=>{if(X.current){const l=window.innerWidth-t.clientX;l>200&&l<window.innerWidth*.4&&ze(l)}if(K.current&&_.current){const l=_.current.getBoundingClientRect(),i=t.clientY-l.top;i>150&&i<l.height-150&&Pe(i)}},[]),J=s.useCallback(()=>{X.current=!1,K.current=!1,document.removeEventListener("mousemove",B),document.removeEventListener("mouseup",J),document.body.style.cursor="default"},[B]),Te=t=>{X.current=!0,document.addEventListener("mousemove",B),document.addEventListener("mouseup",J),document.body.style.cursor="col-resize"},Be=t=>{K.current=!0,document.addEventListener("mousemove",B),document.addEventListener("mouseup",J),document.body.style.cursor="row-resize"},w=ye[u],E=s.useMemo(()=>{const l=Object.keys(ve).map(Number).sort((i,R)=>R-i).find(i=>i<=a)||1;return ve[l]},[a]),xe=j/w.capacity,I=Math.min(xe*(E.webMult||1)*w.cpuMult,1.25),U=Math.min(xe*(E.dbMult||1)*w.memMult,1.25),x=Math.max(I,U),r=f>0||m,Q=m&&p>0,S=a>le||!!ne||a>1&&j<=0,G=Q?"Rebooting":m?"Down":f>0?"Maintenance":x>.85?"High load":"Stable",me=(t,l)=>l?"bg-slate-400":t>=1?"bg-rose-500":t>=.85?"bg-amber-500":"bg-indigo-500",Ee=()=>m||Q?e.jsxs("span",{className:"text-rose-600 font-bold flex items-center gap-1.5",children:[e.jsx(Ke,{size:16})," ",G]}):f>0?e.jsxs("span",{className:"text-amber-600 font-bold flex items-center gap-1.5",children:[e.jsx(Ze,{size:16})," ",G]}):x>.85?e.jsxs("span",{className:"text-amber-600 font-bold flex items-center gap-1.5",children:[e.jsx(ae,{size:16})," ",G]}):e.jsxs("span",{className:"text-emerald-600 font-bold flex items-center gap-1.5",children:[e.jsx(Xe,{size:16})," ",G]}),Ie=async()=>{Z(!0),oe(!0),F("Pinging the Staff Engineer on Slack...");try{const t=Math.round(x*100),l=`You are a brilliant Senior Staff Engineer at "Byte-Bites", a fast-growing food delivery app. The Lead Architect (the player) is asking for your advice on the current infrastructure. 
      Current game state: Round ${a}/20, Server Load: ${t}%, Active Users: ${j}, Budget: $${M}, Stability: ${P}%. The current server is the ${w.name} (${w.specs}).
      Give them 2-3 sentences of advice. Tell them if they are doing well or about to crash. Be slightly sarcastic but actually helpful regarding vertical scaling and their budget. Use food or server puns. Do not use markdown formatting.`,i=await we(l);F(i)}catch{F("The Staff Engineer is asleep at their keyboard (API Error). Try again later.")}oe(!1)},Ue=async()=>{ce(!0),Y("Analyzing server logs...");try{const t=await we(`Final stats: Round ${a}, Users ${j}, Budget $${M}. Post-mortem in 3 sentences.`);Y(t)}catch{Y("Grease fire corrupted the logs.")}ce(!1)},Ge=t=>{const l=ye[t];q(i=>i-l.cost),h(t),v(1),k(i=>[{type:"warn",text:`Round ${a}: Scaling to ${l.name}. Infrastructure offline.`},...i]),A(!1)},De=()=>{g(!1),N(0),W(25),k(t=>[{type:"recover",text:`Round ${a}: [System] Forced reboot successful. Systems online but highly unstable.`},...t]),L(!1)},He=()=>{if(S)return;if(a===le){O("finished");return}const t=r?0:ct(a),l=j+t;let i=0;r?i=Math.ceil(l*.12):x>=1?i=Math.ceil(l*.15):x>=.85&&(i=Math.ceil(l*.04));const R=Math.max(0,l-i),he=w.maintenance,ee=(r?0:R*25)-he,pe=M+ee;let b=P;x>.9&&!r?b=Math.max(0,b-15):!r&&x<.7&&(b=Math.min(100,b+10));let te=m,D=p,se=f;!r&&Math.random()>b/100+.25&&(te=!0,b=Math.max(0,b-30),k(y=>[{type:"crash",text:`Round ${a}: [FATAL] Monolith overloaded and crashed!`},...y])),f>0?(se--,se===0&&k(y=>[{type:"recover",text:`Round ${a}: [System] Upgrade complete. Monolith online.`},...y])):m&&D>0&&(D--,D===0&&(te=!1,b=50,k(y=>[{type:"recover",text:`Round ${a}: [System] Monolith recovered. Restoration complete.`},...y]))),c(y=>y+1),re(R),q(pe),W(b),g(te),N(D),v(se),k(y=>[{type:r?"crash":"normal",text:`Round ${a}: Net ${ee>=0?"+":""}${ee} | Cost: $${he} | Customers: ${R}`},...y]),pe<=0&&O("bankrupt")},ue=()=>{c(1),h(0),v(0),g(!1),N(0),re(be),q(ge),W(100),k([]),O(null),o("overview"),z(!1)},C=dt({crashes:0,activeUsers:j,budget:M}),qe=(t,l)=>l?"border-rose-300 ring-4 ring-rose-50":t>=1?"border-rose-500 ring-4 ring-rose-100":t>=.85?"border-amber-400 ring-4 ring-amber-50":"border-slate-200 hover:border-indigo-400";return n==="overview"?e.jsx(xt,{onStart:()=>o("playing")}):e.jsxs("div",{className:"h-screen w-full flex flex-col items-center justify-center bg-slate-100 font-sans text-[18px] overflow-hidden antialiased select-none text-black",children:[Ne&&e.jsx($,{title:"Reset Simulation",icon:e.jsx(ae,{className:"text-rose-500",size:60}),onClose:()=>z(!1),footer:e.jsxs("div",{className:"flex gap-4 w-full",children:[e.jsx("button",{onClick:()=>z(!1),className:"flex-1 py-4 bg-slate-100 rounded-xl text-black font-normal",children:"Cancel"}),e.jsx("button",{onClick:ue,className:"flex-1 py-4 bg-rose-600 text-white rounded-xl font-normal text-white",children:"Reset"})]}),children:"Confirm reset? All round progress will be lost."}),Me&&e.jsx($,{title:"System Recovery",icon:e.jsx(et,{className:"text-rose-500 animate-spin-slow",size:60}),onClose:()=>L(!1),footer:e.jsxs("div",{className:"flex gap-4 w-full",children:[e.jsx("button",{onClick:()=>L(!1),className:"flex-1 py-4 bg-slate-100 rounded-xl text-black font-normal",children:"Cancel"}),e.jsx("button",{onClick:De,className:"flex-1 py-4 bg-indigo-600 text-white rounded-xl font-normal text-white",children:"Reboot Server"})]}),children:"The monolith server has encountered a fatal crash. System reboot is required to restore customer access. Note: Initial boot stability will be critical (25%)."}),Re&&e.jsx($,{title:"Senior Staff Engineer",icon:"ðŸ§”ðŸ»â€â™‚ï¸",onClose:()=>Z(!1),footer:e.jsx("button",{onClick:()=>Z(!1),className:"w-full py-4 bg-slate-900 text-white rounded-xl font-normal text-white",children:"Close advice"}),children:e.jsx("div",{className:"bg-slate-50 p-6 rounded-2xl border border-slate-200 min-h-[140px] flex items-center justify-center",children:Ce?e.jsx("span",{className:"text-slate-400 animate-pulse italic",children:"Thinking..."}):e.jsxs("p",{className:"text-black font-normal leading-relaxed",children:['"',Se,'"']})})}),ke&&e.jsxs($,{title:"Hardware Configuration",icon:e.jsx(at,{size:60,className:"text-slate-700"}),onClose:()=>A(!1),footer:e.jsx("button",{onClick:()=>A(!1),className:"w-full py-4 bg-slate-100 text-black rounded-xl font-normal text-black",children:"Cancel"}),children:[e.jsx("div",{className:"grid grid-cols-1 gap-3 text-left",children:[{idx:1,type:"Balanced",icon:e.jsx(fe,{}),specs:"8 vCPU / 16GB RAM",cost:2500},{idx:2,type:"Compute",icon:e.jsx(rt,{}),specs:"16 vCPU / 8GB RAM",cost:2800},{idx:3,type:"Memory",icon:e.jsx(Je,{}),specs:"4 vCPU / 32GB RAM",cost:2800}].map(t=>e.jsxs("button",{onClick:()=>Ge(t.idx),className:"flex items-center gap-4 p-4 border-2 border-slate-100 rounded-2xl hover:border-indigo-400 hover:bg-indigo-50 transition-all text-left",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-white flex items-center justify-center text-indigo-600 shadow-sm",children:t.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-bold text-black",children:t.type}),e.jsxs("span",{className:"text-indigo-600 font-bold",children:["$",t.cost]})]}),e.jsx("div",{className:"text-sm text-slate-500 font-normal",children:t.specs})]})]},t.idx))}),e.jsxs("p",{className:"mt-4 text-rose-600 text-sm font-bold flex items-center justify-center gap-1.5",children:[e.jsx(ae,{size:14})," Note: Applying a new config causes 1 round of system downtime."]})]}),ne&&e.jsxs($,{title:"Analysis Report",icon:"ðŸ†",onClose:ue,children:[e.jsxs("div",{className:"flex flex-col items-center gap-2 mb-4",children:[e.jsx("div",{className:`text-[40px] font-bold border-4 rounded-full w-20 h-20 flex items-center justify-center ${C.color} border-current`,children:C.grade}),e.jsx("div",{className:`text-[20px] font-bold uppercase ${C.color}`,children:C.style})]}),e.jsx("p",{className:"mb-4 text-black font-normal",children:C.causal}),ie?e.jsx("div",{className:"bg-purple-50 p-4 rounded-xl border border-purple-100 text-left text-sm leading-relaxed text-black font-normal",children:ie}):e.jsx("button",{onClick:Ue,disabled:$e,className:"w-full py-4 bg-purple-600 text-white rounded-xl font-normal text-white",children:"Generate AI Post-Mortem âœ¨"})]}),e.jsxs("div",{className:"flex flex-col w-full max-w-[1440px] h-full bg-white lg:border border-slate-200 lg:shadow-2xl overflow-hidden font-sans text-black",children:[e.jsxs("header",{className:"flex-shrink-0 p-5 lg:px-10 border-b bg-slate-900 text-white flex flex-col md:flex-row items-center justify-between gap-4 h-auto min-h-[100px] shadow-sm z-10 text-white",children:[e.jsxs("div",{className:"flex flex-col md:w-auto text-center md:text-left",children:[e.jsxs("h1",{className:"text-[18px] font-normal flex items-center justify-center md:justify-start gap-2 uppercase tracking-widest text-white",children:[e.jsx(st,{size:18,className:"text-indigo-400"})," Phase 1"]}),e.jsx("p",{className:"text-[14px] font-normal text-slate-400 uppercase",children:"The Monolith"})]}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-3",children:[e.jsx("button",{onClick:Ie,className:"h-12 px-6 bg-purple-600 rounded-xl text-sm font-bold shadow-md text-white",disabled:S,children:"Ask Staff Eng âœ¨"}),e.jsxs("button",{onClick:He,className:"h-12 px-10 bg-indigo-600 rounded-xl text-sm font-bold text-white flex items-center gap-2 shadow-md",disabled:S,children:["Next Round ",e.jsx(Ye,{size:18})]}),e.jsx("button",{onClick:()=>z(!0),className:"h-12 px-4 bg-slate-800 rounded-xl text-white",children:e.jsx(tt,{size:18})})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row overflow-hidden relative text-black",children:[e.jsxs("main",{ref:_,className:"flex-1 flex flex-col overflow-hidden bg-slate-50 min-h-0 text-black",children:[e.jsxs("section",{style:{height:`${Le}px`},className:"bg-white flex-shrink-0 flex items-center justify-center relative p-6 border-b border-slate-200 shadow-inner overflow-hidden text-black",children:[e.jsx("h4",{className:"absolute top-5 left-10 font-normal text-slate-400 uppercase text-[12px] tracking-widest",children:"Infrastructure Topology"}),e.jsxs("div",{className:"absolute bottom-5 right-5 flex gap-1 p-1 bg-white border border-slate-200 rounded-xl shadow-lg z-30",children:[e.jsx("button",{onClick:()=>V(.75),className:`p-2 rounded-lg ${T===.75?"bg-indigo-50 text-indigo-600":"text-slate-400"}`,children:e.jsx(ot,{size:18})}),e.jsx("button",{onClick:()=>V(1),className:`p-2 rounded-lg ${T===1?"bg-indigo-50 text-indigo-600":"text-slate-400"}`,children:e.jsx(Qe,{size:18})}),e.jsx("button",{onClick:()=>V(1.5),className:`p-2 rounded-lg ${T===1.5?"bg-indigo-50 text-indigo-600":"text-slate-400"}`,children:e.jsx(nt,{size:18})})]}),e.jsx("div",{className:"transition-transform duration-300",style:{transform:`scale(${T})`},children:e.jsxs("button",{onClick:()=>{m&&p===0?L(!0):!r&&!S&&A(!0)},disabled:r&&!m||Q||S,className:`relative w-[280px] h-[160px] max-w-[280px] max-h-[160px] p-3 rounded-[2rem] border-[4px] bg-slate-50 flex flex-col items-center justify-center gap-3 shadow-xl group outline-none transition-all duration-300 ${qe(x,r)}`,children:[r&&e.jsx("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 -rotate-12 z-20 pointer-events-none",children:e.jsx("div",{className:"bg-red-600 text-white font-bold px-4 py-2 rounded-lg shadow-xl border-4 border-white text-xl uppercase tracking-widest animate-bounce",children:"Down"})}),e.jsxs("div",{className:`w-full flex gap-2 h-full transition-all duration-300 ${r?"grayscale opacity-60":""}`,children:[e.jsxs("div",{className:`flex-1 p-3 rounded-2xl border-2 transition-all flex flex-col justify-center ${r?"bg-slate-200 border-slate-300":"bg-indigo-50 border-indigo-100"}`,children:[e.jsxs("span",{className:"text-[10px] uppercase font-bold text-indigo-500 mb-1 flex items-center gap-1",children:[e.jsx(fe,{size:12,className:"opacity-70 flex-shrink-0"})," Web App"]}),e.jsxs("div",{className:"flex justify-between items-center text-[10px] text-slate-500 font-bold mb-1",children:[e.jsx("span",{children:"CPU"}),e.jsx("span",{children:r?"0%":`${(I*100).toFixed(0)}%`})]}),e.jsx("div",{className:"w-full bg-indigo-100 h-1.5 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all duration-700 ${me(I,r)}`,style:{width:r?"0%":`${Math.min(I*100,100)}%`}})})]}),e.jsxs("div",{className:`flex-1 p-3 rounded-2xl border-2 transition-all flex flex-col justify-center ${r?"bg-slate-200 border-slate-300":"bg-emerald-50 border-emerald-100"}`,children:[e.jsxs("span",{className:"text-[10px] uppercase font-bold text-emerald-500 mb-1 flex items-center gap-1",children:[e.jsx(_e,{size:12,className:"opacity-70 flex-shrink-0"})," Database"]}),e.jsxs("div",{className:"flex justify-between items-center text-[10px] text-slate-500 font-bold mb-1",children:[e.jsx("span",{children:"I/O"}),e.jsx("span",{children:r?"0%":`${(U*100).toFixed(0)}%`})]}),e.jsx("div",{className:"w-full bg-emerald-100 h-1.5 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all duration-700 ${me(U,r)}`,style:{width:r?"0%":`${Math.min(U*100,100)}%`}})})]})]}),e.jsxs("div",{className:`w-full flex justify-between gap-2 mt-1 px-1 transition-all duration-300 ${r?"grayscale opacity-60":""}`,children:[e.jsxs("div",{className:"flex-1 bg-white py-1 px-2 rounded-lg text-center border border-slate-100 text-[10px] font-bold shadow-sm truncate text-black uppercase leading-tight",children:["Load: ",r?"0%":`${(x*100).toFixed(0)}%`]}),e.jsx("div",{className:"flex-1 bg-white py-1 px-2 rounded-lg text-center border border-slate-100 text-[10px] font-bold shadow-sm truncate text-black uppercase leading-tight",children:w.specs})]})]})})]}),e.jsx("div",{onMouseDown:Be,className:"h-2 bg-slate-200 hover:bg-indigo-400 transition-colors flex items-center justify-center cursor-row-resize",children:e.jsx("div",{className:"w-12 h-1 bg-slate-300 rounded-full"})}),e.jsxs("section",{className:"flex-1 overflow-y-auto p-6 space-y-6 text-black font-normal",children:[e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[{label:"Round",value:`${a} / ${le}`,color:"bg-slate-50 border-slate-100"},{label:"Status",value:Ee(),color:"bg-slate-50 border-slate-100"},{label:"Customers",value:Math.round(j).toLocaleString(),color:"bg-slate-50 border-slate-100"},{label:"Stability",value:r?"â€”":`${P.toFixed(0)}%`,color:P>50?"bg-emerald-50 border-emerald-100":"bg-rose-50 border-rose-100"},{label:"Sys Load",value:r?"â€”":`${(x*100).toFixed(0)}%`,color:x>=.85?"bg-rose-50 border-rose-100":"bg-indigo-50 border-indigo-100"},{label:"Capacity",value:w.capacity,color:"bg-slate-50 border-slate-100"},{label:"Latency",value:r?"â€”":`${Math.round(250+(x>.8?(x-.8)*1e3:0))}ms`,color:x>=.85?"bg-rose-50 border-rose-100":"bg-amber-50 border-amber-100"},{label:"Capital",value:`$${Math.round(M).toLocaleString()}`,color:"bg-violet-50 border-violet-100 text-violet-700"}].map((t,l)=>e.jsxs("div",{className:`flex flex-col gap-1 border p-4 rounded-2xl shadow-sm ${t.color}`,children:[e.jsx("span",{className:"text-slate-500 text-[10px] uppercase font-bold tracking-widest",children:t.label}),e.jsx("div",{className:"font-bold text-[18px] text-black leading-none",children:t.value})]},l))}),e.jsxs("div",{className:"bg-orange-50 border border-orange-100 p-8 rounded-[2rem] text-center shadow-sm text-black",children:[e.jsx("h4",{className:"font-bold text-black uppercase tracking-wide mb-2",children:E.event}),e.jsx("p",{className:"text-slate-600 leading-relaxed max-w-2xl mx-auto text-[16px] font-normal text-black",children:E.context})]})]})]}),e.jsx("div",{className:"hidden lg:flex w-2 cursor-col-resize bg-slate-200 hover:bg-indigo-400 items-center justify-center",onMouseDown:Te,children:e.jsx("div",{className:"w-1 h-20 bg-slate-300 rounded-full"})}),e.jsxs("aside",{className:"bg-white flex flex-col overflow-hidden border-l border-slate-200 text-black",style:{width:`${Ae}px`},children:[e.jsx("div",{className:"p-6 border-b bg-slate-50 h-[70px] flex items-center justify-between text-black",children:e.jsxs("h3",{className:"font-bold flex items-center gap-2 text-[14px] uppercase tracking-widest text-black",children:[e.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-indigo-500 animate-pulse"})," Telemetry"]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-5 flex flex-col gap-3 bg-slate-100/30 text-black",children:[e.jsx("div",{ref:de}),H.length===0?e.jsx("div",{className:"p-10 text-slate-400 italic text-center uppercase text-sm tracking-widest font-normal text-black text-center",children:"Awaiting Pulse..."}):H.map((t,l)=>e.jsx("div",{className:`p-4 rounded-xl text-[14px] shadow-sm border font-normal text-black ${t.type==="crash"?"bg-rose-50 border-rose-200 text-rose-700 font-bold":"bg-white border-slate-200 text-slate-700"}`,children:t.text},l))]})]})]})]})]})}Oe.createRoot(document.getElementById("root")).render(e.jsx(mt,{}));
