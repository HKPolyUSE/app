import{c as Ve,j as e,r as s}from"./client-B_pnGUEq.js";const F=20,H=[{name:"Micro Instance",capacity:80,cpu:4,ram:16,upgradeCost:0,maintenance:600},{name:"Standard Instance",capacity:160,cpu:8,ram:32,upgradeCost:2e3,maintenance:1500},{name:"Performance Instance",capacity:320,cpu:16,ram:64,upgradeCost:4e3,maintenance:3500}],_e=2,qe=3,Ke=.85,ne=2e4,Xe={1:{event:"Market entry",context:"You've just launched. Traffic is low, but costs are real. Every decision now determines your future runway. Keep a close eye on your initial burn rate and accumulate a cash buffer before traffic begins to ramp up."},5:{event:"Tech blog feature",context:"A popular tech blog has featured your app! This is causing a steady stream of new sign-ups. Growth is accelerating faster than previous trends. Watch utilization carefully; you have very little time to react."},9:{event:"Viral warning",context:"User sentiment is extremely high. Our marketing team predicts a massive viral surge in the next round. The current infrastructure will likely fail if left as-is. Vertical scaling takes 2 rounds; act now."},10:{event:"The viral surge",context:"Traffic has doubled! Our servers are under immense scrutiny from thousands of new users. Any latency now will lead to massive churn and reputation damage. Prioritize stability over profit during this surge."},15:{event:"Enterprise shift",context:"A major enterprise client is testing our platform. They demand zero downtime and perfect stability. This is our chance to secure a massive long-term contract. Keep load low to allow the system to stabilize."}};function ye(){return 30}function Je(a){return 10+Math.floor(a/4)}function Qe({downtime:a,crashes:h,satisfaction:m,budget:x,activeUsers:c,currentMaintenance:N}){const l=x<=0,f=c*25>N;return!l&&c>=240&&h===0&&m>=.9?{grade:"S",style:"The tech visionary",color:"text-emerald-700",causal:"Exceptional scaling. You built a high-capacity engine that never faltered. By anticipating demand, you achieved the maximum possible market reach with 100% uptime."}:!l&&c>=170&&h<=1&&f?{grade:"A",style:"The growth strategist",color:"text-indigo-700",causal:"Balanced and sustainable. You navigated growth hurdles effectively. While there was minor friction, the business is now a profitable, high-scale operation."}:!l&&h<=3&&m>=.6?{grade:"B",style:"The reliable operator",color:"text-blue-700",causal:"Stable but cautious. You prioritized uptime over aggressive expansion. You have a solid user base, though you may have left some growth on the table by playing it safe."}:!l&&f&&x<ne?{grade:"C",style:"The high-burn scaler",color:"text-amber-700",causal:"You have the hardware and the users, but your margins are razor-thin. You invested heavily in Tier 3, and while it works, one bad round of downtime could lead to a liquidity crisis."}:!l&&(h>3||!f)?{grade:"D",style:"The firefighter",color:"text-orange-700",causal:"Reactive management. Frequent crashes and late scaling caused permanent user churn. Your current operating costs are unsustainable given the users you lost."}:{grade:"F",style:"The failed start-up",color:"text-rose-700",causal:"Liquidity reached zero. Whether through scaling too early without a user base or staying offline too long, the business ran out of cash to keep the servers running."}}function Ze(a){return a<.7?180+Math.round(40*a):a<.9?210+Math.round(240*(a-.7)/.2):a<=1?450+Math.round(550*(a-.9)/.1):2e3+Math.round(3e3*(a-1))}function re({title:a,children:h,onClose:m,icon:x,footer:c}){return e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[100] bg-slate-900 bg-opacity-60 backdrop-blur-md p-4 antialiased font-sans",children:e.jsx("div",{className:"bg-white rounded-[2rem] shadow-2xl max-w-lg w-full overflow-hidden animate-fadein border border-slate-100",children:e.jsxs("div",{className:"p-8 text-center",children:[x&&e.jsx("div",{className:"text-6xl mb-4",children:x}),e.jsx("h2",{className:"text-[18px] font-normal text-slate-800 mb-3",children:a}),e.jsx("div",{className:"text-slate-600 mb-8 leading-relaxed text-[18px]",children:h}),c||e.jsx("button",{onClick:m,className:"w-full py-4 bg-indigo-600 text-white rounded-xl font-normal text-[18px] hover:bg-indigo-700 transition-all shadow-lg active:scale-[0.98]",children:"Proceed"})]})})})}function et(){const[a,h]=s.useState(1),[m,x]=s.useState(0),[c,N]=s.useState(0),[l,Y]=s.useState(!1),[f,G]=s.useState(0),[P,le]=s.useState(1),[g,oe]=s.useState(ye()),[V,E]=s.useState([]),[je,ie]=s.useState(!1),[Ne,I]=s.useState(!1),[Se,S]=s.useState(0),[Me,ce]=s.useState(0),[M,_]=s.useState(ne),[de,q]=s.useState(null),[U,ue]=s.useState(100),[Ce,he]=s.useState(0),[Re,Te]=s.useState(300),[$e,Le]=s.useState(380),K=s.useRef(!1),X=s.useRef(!1),J=s.useRef(null),me=s.useRef(null);s.useEffect(()=>{var t;(t=me.current)==null||t.scrollIntoView({behavior:"smooth"})},[V]);const p=s.useCallback(t=>{if(K.current){const i=window.innerWidth-t.clientX;i>200&&i<window.innerWidth*.4&&Te(i)}if(X.current&&J.current){const i=J.current.getBoundingClientRect(),$=t.clientY-i.top;$>150&&$<i.height-150&&Le($)}},[]),C=s.useCallback(()=>{K.current=!1,X.current=!1,document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",C),document.body.style.cursor="default"},[p]),ke=s.useCallback(t=>{K.current=!0,document.addEventListener("mousemove",p),document.addEventListener("mouseup",C),document.body.style.cursor="col-resize"},[p,C]),Ee=s.useCallback(t=>{X.current=!0,document.addEventListener("mousemove",p),document.addEventListener("mouseup",C),document.body.style.cursor="row-resize"},[p,C]),xe=H[m],{capacity:fe,cpu:Ie,ram:Ue,maintenance:ge}=xe,d=g/fe,b=Ze(d),De=m+1,v=H[De],R=v==null?void 0:v.upgradeCost,Oe=R===void 0||M>=R,Ae=l&&f>0,pe=l&&f===0,Q=c>0,r=Q||l,Z=a>F||!!de||a>1&&g<=0,be=Xe[a]||{event:"Standard operations",context:"Traffic flow remains consistent with historical patterns. All endpoints are reporting healthy status codes. Systems are stable."},ze=()=>{pe&&(G(qe),E(t=>[{type:"recover",text:`Round ${a}: [Recovery] Server reboot sequence initiated.`},...t]))},Be=()=>{if(Z)return;if(a===F){q("finished");return}let t=1,i=!1;a===9&&P>=.8&&(t=2.2,i=!0);let $=r?0:Je(a)*t,D=g+$,w=0,O="info",L="";r?(w=Math.ceil(D*(.07+Math.random()*.05)),L=`${w} users lost to system outage.`,O="warnslow"):d>=1?(w=Math.ceil(D*.22),L="System overload! Mass user dropout.",O="warnover"):b>450&&(w=Math.ceil(D*((d-.85)*1.5+.05)),L=`${w} users left due to system lag.`,O="warnslow");let A=Math.max(0,D-w),ee=A/fe,te=(r?0:A*25)-ge,se=M+te,n=P,y=[],z=c,ae=l,j=f,we=!1,B=!r&&ee>Ke?Ce+1:0,u=U;B>=2?u=Math.max(0,u-B*14):!r&&ee<.7&&(u=Math.min(100,u+15));const Pe=(100-u)/100;!r&&(Math.random()<Pe||ee>1.3)&&(ae=!0,j=0,u=Math.max(0,u-40),n=Math.max(0,n-.25),y.push({type:"crash",text:"ðŸ”¥ [Failure] Critical hardware fault detected."}),S(o=>o+1),ce(o=>o+1),we=!0,B=0),c>0?(z--,n=Math.max(0,n-.1),y.push({type:"downtime",text:`[Scaling] Transition in progress... (${z} rounds)`}),z===0&&y.push({type:"recover",text:"ðŸš€ [Online] Upgrade completed successfully."}),S(o=>o+1),u=Math.min(100,u+5)):l&&(j>0&&(j--,n=Math.max(0,n-.15),y.push({type:"crash",text:`[Reboot] Data recovery... (${j} rounds)`}),j===0&&(ae=!1,y.push({type:"recover",text:"âœ… [Online] Server restored."}),u=60)),S(o=>o+1)),!r&&!we&&(b>950?n-=.12:b>700?n-=.08:b>450?n-=.04:n=Math.min(1,n+.02)),n=Math.min(1,Math.max(0,Math.round(n*100)/100));let W=null;se<0?(se=0,W="budget"):A<=0&&a>1&&(W="no-users");let k=[{type:"normal",text:`Round ${a}: Profit & loss ${te>=0?"+":""}${te} | User mood: ${(n*100).toFixed(0)}%`}];i&&(k.push({type:"recover",text:"ðŸŒŸ [Surge] Viral attraction detected!"}),ie(!0)),L&&k.push({type:O,text:`[Info] ${L}`}),k=k.concat(y.map(o=>({...o,type:o.type||"info"}))),h(o=>o+1),oe(A),N(z),Y(ae),G(j),le(n),_(se),ue(u),he(B),E(o=>[...k.slice().reverse(),...o]),W&&q(W)},We=()=>{N(_e),x(t=>t+1),_(t=>t-R),E(t=>[{type:"downtime",text:`Round ${a}: Initiated scale up to ${H[m+1].name}.`},...t]),S(t=>t+1)},ve=()=>{h(1),x(0),N(0),Y(!1),G(0),le(1),oe(ye()),E([]),S(0),ce(0),_(ne),ue(100),he(0),q(null)},Fe=l?"ðŸ”¥":c?"â³":d>.85?"âš ï¸":"âœ…",He=Ae?"Rebooting":l?"Down":Q?"Scaling":d>.85?"High load":"Stable",Ye=U>70?"text-green-600":U>30?"text-amber-600":"text-rose-600",Ge=m<H.length-1&&!r&&!Z&&Oe,T=Qe({downtime:Se,crashes:Me,satisfaction:P,budget:M,activeUsers:g,currentMaintenance:ge});return e.jsxs("div",{className:"h-screen w-full flex flex-col items-center justify-center bg-slate-100 font-sans text-[18px] font-normal overflow-hidden antialiased select-none",children:[je&&e.jsx(re,{title:"Viral surge!",icon:"ðŸ“ˆ",onClose:()=>ie(!1),children:"User interest has peaked! A massive traffic surge is imminent."}),Ne&&v&&e.jsxs(re,{title:"Upgrade infrastructure",icon:"âš¡",onClose:()=>I(!1),footer:e.jsxs("div",{className:"flex gap-4 w-full",children:[e.jsx("button",{onClick:()=>I(!1),className:"flex-1 py-4 bg-slate-100 text-slate-500 rounded-xl font-normal hover:bg-slate-200 transition-all",children:"Cancel"}),e.jsx("button",{onClick:()=>{We(),I(!1)},className:"flex-1 py-4 bg-indigo-600 text-white rounded-xl font-normal shadow-md",children:"Confirm"})]}),children:["Scale to ",v.name," for $",v.upgradeCost,".",e.jsx("br",{}),"Warning: 2 rounds of downtime."]}),de&&e.jsxs(re,{title:"Analysis report",icon:"ðŸ†",onClose:ve,children:[e.jsxs("div",{className:"flex flex-col items-center gap-2 mb-6",children:[e.jsx("div",{className:`text-[40px] font-normal border-[5px] border-current rounded-full w-20 h-20 flex items-center justify-center ${T.color}`,children:T.grade}),e.jsx("div",{className:`text-[22px] font-normal uppercase ${T.color}`,children:T.style})]}),e.jsxs("div",{className:"space-y-4 text-left bg-slate-50 p-6 rounded-[1.5rem] border border-slate-200 shadow-inner",children:[e.jsx("p",{className:"font-normal text-slate-600 leading-relaxed",children:T.causal}),e.jsxs("div",{className:"pt-4 border-t border-slate-200 italic text-slate-400",children:["Score: $",Math.round(M).toLocaleString()," | Reach: ",Math.round(g)]})]})]}),e.jsxs("div",{className:"flex flex-col w-full max-w-[1440px] h-full bg-white border border-slate-200 shadow-2xl overflow-hidden font-sans",children:[e.jsxs("header",{className:"flex-shrink-0 p-5 sm:px-10 border-b bg-slate-900 text-white flex items-center justify-between gap-6 h-[100px] shadow-sm z-10",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h1",{className:"text-[18px] font-normal leading-none",children:"Infra-Scaler v2"}),e.jsx("p",{className:"text-[18px] font-normal text-slate-400 mt-1.5 leading-none",children:"Vertical stack simulation"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:Be,className:"h-14 px-10 bg-indigo-600 text-white rounded-xl font-normal hover:bg-indigo-500 shadow-lg active:scale-95 transition-all",disabled:Z,children:"Next round"}),pe?e.jsx("button",{onClick:ze,className:"h-14 px-8 bg-orange-500 text-white rounded-xl font-normal hover:bg-orange-600 animate-pulse",children:"Restart server"}):e.jsxs("button",{onClick:()=>I(!0),className:"h-14 px-8 bg-pink-600 text-white rounded-xl font-normal disabled:opacity-30 active:scale-95 transition-all shadow-md",disabled:!Ge,children:["Scale up ",R!==void 0?`($${R})`:""]}),e.jsxs("button",{onClick:ve,className:"h-14 px-6 bg-slate-800 text-slate-300 rounded-xl font-normal hover:bg-slate-700 transition-all active:scale-95 flex items-center gap-2",children:[e.jsx("span",{children:"â†º"}),e.jsx("span",{children:"Restart game"})]})]})]}),e.jsxs("div",{className:"flex-1 flex overflow-hidden relative",children:[e.jsxs("main",{ref:J,className:"flex-1 flex flex-col overflow-hidden bg-slate-50",children:[e.jsxs("section",{style:{height:`${$e}px`},className:"bg-white flex items-center justify-center relative p-6 transition-none overflow-hidden border-b border-slate-200 shadow-inner",children:[e.jsx("h4",{className:"absolute top-5 left-10 font-normal text-slate-600",children:"Internal system topology"}),e.jsxs("div",{className:`relative h-[85%] w-full max-w-[240px] p-4 rounded-[2.5rem] border-[5px] transition-all duration-700 bg-slate-50 flex flex-col items-center gap-4 shadow-xl ${l?"border-rose-300 ring-4 ring-rose-50":Q?"border-amber-300 ring-4 ring-amber-50":"border-slate-200"}`,children:[e.jsxs("div",{className:`w-full flex-1 min-h-0 p-4 rounded-2xl border-2 transition-all flex flex-col items-center justify-center gap-2 ${r?"bg-slate-200 border-slate-300 text-slate-400 grayscale":"bg-indigo-50 border-indigo-200 text-indigo-700"}`,children:[e.jsx("span",{className:"font-normal text-[18px]",children:"Web application"}),e.jsxs("div",{className:"w-full px-2",children:[e.jsxs("div",{className:"flex justify-between text-[14px] font-normal mb-1.5 opacity-60",children:[e.jsx("span",{children:"Compute load"}),e.jsx("span",{children:r?"0%":`${(d*100).toFixed(0)}%`})]}),e.jsx("div",{className:"w-full bg-indigo-100 h-2 rounded-full overflow-hidden",children:e.jsx("div",{className:"bg-indigo-500 h-full transition-all duration-700 ease-out",style:{width:r?"0%":`${d*100}%`}})})]})]}),e.jsxs("div",{className:`w-full flex-1 min-h-0 p-4 rounded-2xl border-2 transition-all flex flex-col items-center justify-center gap-2 ${r?"bg-slate-200 border-slate-300 text-slate-400 grayscale":"bg-emerald-50 border-emerald-200 text-emerald-700"}`,children:[e.jsx("span",{className:"font-normal text-[18px]",children:"Database tier"}),e.jsxs("div",{className:"w-full px-2",children:[e.jsxs("div",{className:"flex justify-between text-[14px] font-normal mb-1.5 opacity-60",children:[e.jsx("span",{children:"Storage I/O"}),e.jsx("span",{children:r?"0%":`${(Math.min(d*1.1,1)*100).toFixed(0)}%`})]}),e.jsx("div",{className:"w-full bg-emerald-100 h-2 rounded-full overflow-hidden",children:e.jsx("div",{className:"bg-emerald-500 h-full transition-all duration-700 ease-out",style:{width:r?"0%":`${Math.min(d*1.1,1)*100}%`}})})]})]}),e.jsxs("div",{className:"w-full flex justify-between gap-2 font-normal text-slate-700 text-[16px]",children:[e.jsxs("div",{className:"flex-1 bg-white p-2 rounded-lg text-center border border-slate-200 shadow-sm",children:[Ie," vCPU"]}),e.jsxs("div",{className:"flex-1 bg-white p-2 rounded-lg text-center border border-slate-200 shadow-sm",children:[Ue," GB RAM"]})]})]})]}),e.jsx("div",{onMouseDown:Ee,className:"h-2 w-full cursor-row-resize bg-slate-200 hover:bg-indigo-400 transition-colors flex items-center justify-center group z-10 shadow-sm",children:e.jsx("div",{className:"w-20 h-1 bg-slate-300 group-hover:bg-white rounded-full opacity-50"})}),e.jsxs("section",{className:"flex-1 overflow-y-auto p-6 sm:p-8 space-y-10",children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-x-8 gap-y-6",children:[{label:"Round",value:`${Math.min(a,F)} / ${F}`,color:"bg-indigo-50 border-indigo-100"},{label:"Status",value:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:Fe}),e.jsx("span",{children:He})]}),color:"bg-slate-50 border-slate-200"},{label:"Instance",value:`${xe.name}`,color:"bg-indigo-50 border-indigo-100"},{label:"Stability",value:r?"â€”":e.jsxs("span",{className:`font-normal ${Ye}`,children:[U.toFixed(0),"%"]}),color:"bg-emerald-50 border-emerald-100"},{label:"Users",value:Math.round(g).toLocaleString(),color:"bg-emerald-50 border-emerald-100"},{label:"Latency",value:r?"â€”":e.jsxs("span",{className:b>700?"text-rose-500 font-normal":"text-emerald-600",children:[b,"ms"]}),color:"bg-amber-50 border-amber-100"},{label:"Load",value:r?"â€”":e.jsxs("span",{className:d>=.85?"text-rose-500 font-normal":"text-emerald-700",children:[(d*100).toFixed(0),"%"]}),color:"bg-amber-50 border-amber-100"},{label:"Budget",value:e.jsxs("span",{className:"text-violet-700",children:["$",Math.round(M).toLocaleString()]}),color:"bg-violet-50 border-violet-100"}].map((t,i)=>e.jsxs("div",{className:`flex flex-col gap-0.5 border p-4 rounded-2xl shadow-sm ${t.color}`,children:[e.jsx("span",{className:"text-slate-600 text-[14px] font-normal",children:t.label}),e.jsx("div",{className:"font-normal text-slate-800 leading-none text-[18px]",children:t.value})]},i))}),e.jsxs("div",{className:"bg-orange-50 border border-orange-100 p-8 rounded-[2.5rem] animate-fadein space-y-4 font-normal shadow-sm",children:[e.jsx("h4",{className:"font-normal text-orange-800 text-[18px]",children:be.event}),e.jsx("p",{className:"font-normal text-orange-900 leading-relaxed max-w-4xl text-[18px]",children:be.context})]})]})]}),e.jsx("div",{className:"w-2 cursor-col-resize bg-slate-200 hover:bg-indigo-400 transition-colors z-50 flex items-center justify-center group",onMouseDown:ke,children:e.jsx("div",{className:"w-1 h-20 bg-slate-300 group-hover:bg-white rounded-full opacity-50"})}),e.jsxs("aside",{className:"bg-white flex flex-col overflow-hidden border-l border-slate-200 transition-none",style:{width:`${Re}px`},children:[e.jsx("div",{className:"p-6 border-b bg-slate-50 flex justify-between items-center flex-shrink-0",children:e.jsxs("h3",{className:"font-normal text-slate-700 flex items-center gap-2 text-[18px]",children:[e.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-indigo-500 animate-pulse"}),"Telemetry feed"]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-5 flex flex-col gap-3 scrollbar-hide bg-slate-100/30",children:[e.jsx("div",{ref:me}),V.length===0?e.jsx("div",{className:"p-10 text-slate-400 italic text-center font-normal text-[18px] leading-relaxed",children:"Awaiting telemetry pulse..."}):e.jsx(e.Fragment,{children:V.map((t,i)=>e.jsx("div",{className:`p-4 rounded-xl leading-snug transition-all font-normal text-[18px] shadow-sm border ${t.type==="crash"?"bg-rose-100 text-rose-800 border-rose-200 border-l-4 border-l-rose-500":t.type==="downtime"?"bg-amber-100 text-amber-800 border-amber-200":t.type==="warn"?"bg-orange-100 text-orange-900 border-orange-200":"bg-white text-slate-700 border-slate-200"}`,children:t.text},i))})]})]})]})]})]})}Ve.createRoot(document.getElementById("root")).render(e.jsx(et,{}));
