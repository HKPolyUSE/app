import{c as Be,j as e,r as a}from"./client-B_pnGUEq.js";const U=20,Z=[{name:"Micro Instance",capacity:80,cpu:4,ram:16,upgradeCost:0,maintenance:600},{name:"Standard Instance",capacity:160,cpu:8,ram:32,upgradeCost:2e3,maintenance:1500},{name:"Performance Instance",capacity:320,cpu:16,ram:64,upgradeCost:4e3,maintenance:3500}],ve=2,we=3,_e=.85,Ne=5e3;function Se(){return 30}function Ge(s){return 10+Math.floor(s/5)}function Pe({gameOverReason:s,downtime:b,crashes:x,satisfaction:m,budget:c}){return s==="budget"?{title:"üí∏ Bankrupt",desc:"Operational costs exceeded your revenue.",color:"text-red-700"}:b<=3&&x===0&&m>=.9&&c>6e4?{title:"üåü Tech Unicorn",desc:"Superb scaling and massive profits!",color:"text-green-800"}:b<=6&&x<=1&&m>=.8&&c>2e4?{title:"üëç Solid Success",desc:"Minimal downtime and satisfied users.",color:"text-blue-700"}:{title:"üòê Survivor",desc:"You kept the lights on, but it was a rocky road.",color:"text-yellow-700"}}function We(s){return s<.7?180+Math.round(40*s):s<.9?210+Math.round(240*(s-.7)/.2):s<=1?450+Math.round(550*(s-.9)/.1):2e3+Math.round(3e3*(s-1))}const Ve=450,qe=.6;function H({title:s,children:b,onClose:x,icon:m,footer:c}){return e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[100] bg-black bg-opacity-40 backdrop-blur-sm p-4 antialiased",children:e.jsx("div",{className:"bg-white rounded-3xl shadow-2xl max-w-lg w-full overflow-hidden animate-fadein border border-slate-100",children:e.jsxs("div",{className:"p-8 text-center",children:[m&&e.jsx("div",{className:"text-5xl mb-4",children:m}),e.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:s}),e.jsx("div",{className:"text-slate-600 mb-6 leading-relaxed",children:b}),c||e.jsx("button",{onClick:x,className:"w-full py-3 bg-slate-900 text-white rounded-2xl font-bold hover:bg-slate-800 transition-all shadow-md active:scale-[0.98]",children:"Continue"})]})})})}function Ye(){const[s,b]=a.useState(1),[x,m]=a.useState(0),[c,F]=a.useState(0),[p,z]=a.useState(!1),[B,_]=a.useState(0),[h,ee]=a.useState(1),[j,te]=a.useState(Se()),[G,I]=a.useState([]),[ye,se]=a.useState(!1),[ke,ae]=a.useState(!1),[Me,T]=a.useState(!1),[le,S]=a.useState(0),[ne,re]=a.useState(0),[y,P]=a.useState(Ne),[Qe,ie]=a.useState(0),[E,W]=a.useState(null),[L,oe]=a.useState(100),[Ce,ce]=a.useState(0),de=a.useRef(null);a.useEffect(()=>{var t;(t=de.current)==null||t.scrollIntoView({behavior:"smooth"})},[G]);const xe=Z[x],{capacity:he,cpu:ue,ram:me,maintenance:pe}=xe,i=j/he,v=We(i),Re=x+1,d=Z[Re],k=d==null?void 0:d.upgradeCost,$e=k===void 0||y>=k,Ue=p&&B>0,fe=p&&B===0,V=c>0,l=V||p,q=s>U||!!E||s>1&&j<=0,Ie=()=>{fe&&(_(we),I(t=>[...t,{type:"recover",text:`Round ${s} ‚Äî üîÑ Reboot initiated (${we} rounds)...`}]))},Te=()=>{if(q)return;if(s===U){W("finished");return}let t=1,f=!1;s===9&&h>=.85&&(t=2,f=!0);let He=l?0:Ge(s)*t,M=j+He,u=0,w="",C="info";l?(u=Math.ceil(M*(.06+Math.random()*.04)),w=`${u} users left while site was offline.`,C="warnslow"):i>=1?(u=Math.ceil(M*.2),w="System overloaded! 20% of users left.",C="warnover"):v>Ve?(u=Math.ceil(M*((i-.9)*2+.05)),w=`${u} users lost to slowness.`,C="warnslow"):h<qe&&(u=Math.ceil((1-h)*.15*M),w=u>0?`${u} users quit due to low satisfaction.`:"",C="warndissat");let R=Math.max(0,M-u),Q=R/he,X=(l?0:R*25)-pe,J=y+X,n=h,g=[],D=c,K=p,N=B,je=!1,A=!l&&Q>_e?Ce+1:0,o=L;A>=2?o=Math.max(0,o-A*12):!l&&Q<.7&&(o=Math.min(100,o+15));const Fe=(100-o)/110;!l&&(Math.random()<Fe||Q>1.25)&&(K=!0,N=0,o=Math.max(0,o-30),n=Math.max(0,n-.25),g.push({type:"crash",text:"üî• CRITICAL FAILURE! Sustained load broke the system. MANUAL RESTART REQUIRED."}),S(r=>r+1),re(r=>r+1),je=!0,A=0),c>0?(D--,n=Math.max(0,n-.09),g.push({type:"downtime",text:`Downtime: scaling... (${D} rounds left)`}),D===0&&g.push({type:"recover",text:"Scaling complete! System online."}),S(r=>r+1),o=Math.min(100,o+5)):p&&(N>0?(N--,n=Math.max(0,n-.14),g.push({type:"crash",text:`Downtime: Rebooting... (${N} rounds left)`}),N===0&&(K=!1,g.push({type:"recover",text:"Reboot finished! System online."}),o=60)):(n=Math.max(0,n-.18),g.push({type:"crash",text:"System is offline. Restart required."})),S(r=>r+1)),!l&&!je&&(v>950?n=Math.max(0,n-.11):v>700?n=Math.max(0,n-.07):v>450&&(n=Math.max(0,n-.03))),n=Math.min(1,Math.max(0,Math.round(n*100)/100));let O=null;J<0?(J=0,O="budget"):R<=0&&s>1&&(O="no-users");let $=[{type:"normal",text:`Round ${s} ‚Äî Users: ${j} ‚Üí ${R} (Net: ${X>=0?"+":""}$${X})`}];f&&($.push({type:"recover",text:"üöÄ Viral Success!"}),ae(!0)),w&&$.push({type:C,text:w}),$=$.concat(g.map(r=>({...r,type:r.type||"info"}))),b(r=>r+1),te(R),F(D),z(K),_(N),ee(n),P(J),oe(o),ce(A),I(r=>[...r,...$]),O&&W(O)},Ee=()=>{ge&&(F(ve),m(t=>t+1),ie(t=>t+1),P(t=>t-k),I(t=>[...t,{type:"downtime",text:`Round ${s} ‚Äî ‚¨ÜÔ∏è Scaling to Tier ${x+2}.`}]),S(t=>t+1))},be=()=>{b(1),m(0),F(0),z(!1),_(0),ee(1),te(Se()),I([]),S(0),re(0),P(Ne),ie(0),oe(100),ce(0),W(null)},Le=h>=.85?"üü¢":h>=.6?"üòê":"üò°",De=p?"üî•":c?"‚è≥":i>.85?"‚ö†Ô∏è":"‚úÖ",Ae=Ue?"Rebooting":p?"Down":V?"Scaling":i>.85?"High Load":"Stable",Oe=L>70?"text-emerald-600":L>30?"text-amber-600":"text-rose-600",ge=x<Z.length-1&&!l&&!q&&$e,Y=Pe({gameOverReason:E,downtime:le,crashes:ne,satisfaction:h,budget:y});return e.jsxs("div",{className:"h-screen w-full flex flex-col items-center justify-center bg-slate-50 p-2 sm:p-4 font-sans text-slate-900 overflow-hidden antialiased selection:bg-indigo-100",children:[ke&&e.jsx(H,{title:"üöÄ Viral Surge!",icon:"üìà",onClose:()=>ae(!1),children:"Growth for Round 10 was doubled due to high satisfaction!"}),Me&&d&&e.jsx(H,{title:"Scale Up Instance",icon:"‚¨ÜÔ∏è",onClose:()=>T(!1),footer:e.jsxs("div",{className:"flex gap-3 w-full",children:[e.jsx("button",{onClick:()=>T(!1),className:"flex-1 py-4 bg-slate-100 text-slate-600 rounded-2xl font-bold hover:bg-slate-200 transition-all active:scale-[0.98]",children:"Cancel"}),e.jsx("button",{onClick:()=>{Ee(),T(!1)},className:"flex-1 py-4 bg-pink-600 text-white rounded-2xl font-bold hover:bg-pink-700 transition-all shadow-md active:scale-[0.98]",children:"Confirm Upgrade"})]}),children:e.jsxs("div",{className:"text-sm space-y-4 text-left font-medium",children:[e.jsxs("p",{className:"text-slate-600",children:["You are about to upgrade your server to a ",e.jsx("b",{className:"text-slate-900",children:d.name}),"."]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 bg-slate-50 p-5 rounded-2xl border border-slate-100 shadow-inner",children:[e.jsxs("div",{children:[e.jsx("span",{className:"block text-[11px] text-slate-400 uppercase font-black tracking-wider",children:"Capacity"}),e.jsxs("span",{className:"font-bold text-slate-800",children:[d.capacity," Users"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-[11px] text-slate-400 uppercase font-black tracking-wider",children:"Op. Cost"}),e.jsxs("span",{className:"font-bold text-rose-500",children:["-$",d.maintenance,"/rd"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-[11px] text-slate-400 uppercase font-black tracking-wider",children:"Upgrade Cost"}),e.jsxs("span",{className:"font-bold text-indigo-600",children:["$",d.upgradeCost]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-[11px] text-slate-400 uppercase font-black tracking-wider",children:"Hardware"}),e.jsxs("span",{className:"font-bold text-slate-800",children:[d.cpu,"vCPU, ",d.ram,"GB"]})]})]}),e.jsxs("div",{className:"bg-amber-50 p-4 rounded-2xl border border-amber-100 flex items-start gap-3",children:[e.jsx("span",{className:"text-xl",children:"‚ö†Ô∏è"}),e.jsxs("p",{className:"text-amber-800 font-bold text-[11px] leading-normal uppercase tracking-tight",children:["DOWNTIME WARNING: Scaling will take ",ve," rounds. System will be completely offline."]})]})]})}),E&&e.jsxs(H,{title:"Simulation Result",icon:E==="budget"?"üí∏":"üèÜ",onClose:be,children:[e.jsx("div",{className:`text-xl font-bold mb-2 ${Y.color}`,children:Y.title}),e.jsxs("p",{className:"mb-4 text-sm italic text-slate-500",children:['"',Y.desc,'"']}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-left bg-slate-50 p-6 rounded-2xl text-sm border border-slate-100",children:[e.jsxs("div",{children:["Final Users: ",e.jsx("b",{className:"text-slate-800",children:Math.round(j)})]}),e.jsxs("div",{children:["Final Budget: ",e.jsxs("b",{className:"text-slate-800",children:["$",Math.round(y).toLocaleString()]})]}),e.jsxs("div",{children:["Satisfaction: ",e.jsxs("b",{className:"text-slate-800",children:[(h*100).toFixed(0),"%"]})]}),e.jsxs("div",{children:["Downtime: ",e.jsxs("b",{className:"text-slate-800",children:[le," rds"]})]})]})]}),ye&&e.jsx(H,{title:"System Handbook",onClose:()=>se(!1),children:e.jsxs("div",{className:"text-left text-sm space-y-3 leading-relaxed text-slate-600",children:[e.jsxs("p",{children:["‚Ä¢ ",e.jsx("span",{className:"font-bold text-slate-900",children:"Scaling State:"})," System is offline during upgrades. Monitoring readouts are disabled."]}),e.jsxs("p",{children:["‚Ä¢ ",e.jsx("span",{className:"font-bold text-slate-900",children:"Utilization Buffer:"})," Sustained load above 85% drains ",e.jsx("span",{className:"text-rose-500 font-bold",children:"Stability"}),"."]}),e.jsxs("p",{children:["‚Ä¢ ",e.jsx("span",{className:"font-bold text-slate-900",children:"Colocated Architecture:"})," Application and Database share host hardware resources."]})]})}),e.jsxs("div",{className:"flex flex-col w-full max-w-6xl h-full max-h-[860px] bg-white border border-slate-200 rounded-[2.5rem] shadow-2xl overflow-hidden",children:[e.jsxs("header",{className:"flex-shrink-0 p-5 sm:px-10 border-b bg-white flex items-center justify-between gap-6",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h1",{className:"text-xl font-black tracking-tight text-slate-800 uppercase leading-none",children:"Infra-Scaler v2"}),e.jsx("p",{className:"text-[11px] font-bold text-slate-400 uppercase tracking-[0.15em] mt-1",children:"Vertical Stack Simulation"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>se(!0),className:"h-10 px-4 rounded-xl border border-slate-200 text-slate-500 hover:bg-slate-50 text-xs font-bold transition-all active:scale-95",children:"Manual"}),e.jsx("button",{onClick:Te,className:"h-10 px-6 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 disabled:opacity-20 transition-all shadow-md active:scale-95",disabled:q,children:s===U?"Results":"Next Round"}),fe?e.jsx("button",{onClick:Ie,className:"h-10 px-6 bg-orange-500 text-white rounded-xl font-bold hover:bg-orange-600 transition-all animate-pulse shadow-md active:scale-95",children:"Restart Server"}):e.jsxs("button",{onClick:()=>T(!0),className:"h-10 px-6 bg-pink-600 text-white rounded-xl font-bold hover:bg-pink-700 disabled:opacity-20 transition-all shadow-md active:scale-95",disabled:!ge,children:["Scale Up ",k!==void 0?`($${k})`:""]}),e.jsx("button",{onClick:be,className:"h-10 w-10 flex items-center justify-center bg-slate-100 text-slate-400 rounded-xl hover:bg-slate-200 transition-all",children:"‚Ü∫"})]})]}),e.jsxs("main",{className:"flex-1 flex flex-col md:flex-row overflow-hidden border-b border-slate-100",children:[e.jsx("section",{className:"w-full md:w-3/5 p-8 sm:p-10 overflow-y-auto border-r border-slate-50",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-14 gap-y-10",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-[11px] uppercase font-black tracking-[0.2em] text-slate-300 pb-3 border-b border-slate-50 mb-2",children:"Infrastructure"}),[{label:"Round",value:`${Math.min(s,U)} / ${U}`},{label:"Status",value:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:De}),e.jsx("span",{className:"font-bold",children:Ae})]})},{label:"Instance",value:`${xe.name} (${ue}C, ${me}G)`},{label:"Stability",value:l?"‚Äî":e.jsxs("span",{className:`font-black ${Oe}`,children:[L.toFixed(0),"%"]})},{label:"Total Crashes",value:ne}].map((t,f)=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-400 text-[11px] font-bold uppercase tracking-wide",children:t.label}),e.jsx("div",{className:"text-sm font-bold text-slate-800",children:t.value})]},f))]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-[11px] uppercase font-black tracking-[0.2em] text-slate-300 pb-3 border-b border-slate-50 mb-2",children:"Ops & Finance"}),[{label:"Active Users",value:Math.round(j)},{label:"Latency",value:l?"‚Äî":e.jsxs("span",{className:v>700?"text-rose-500 font-bold":"text-emerald-600",children:[v,"ms"]})},{label:"Utilization",value:l?"‚Äî":e.jsxs("span",{className:i>=.85?"text-rose-500 font-black":"text-emerald-500 font-bold",children:[(i*100).toFixed(0),"%"]})},{label:"User Mood",value:e.jsxs("div",{className:"flex items-center gap-2 font-black",children:[e.jsx("span",{children:Le}),e.jsxs("span",{children:[(h*100).toFixed(0),"%"]})]})},{label:"Budget",value:e.jsxs("span",{className:"font-black text-indigo-600",children:["$",Math.round(y).toLocaleString()]})},{label:"Operating Cost",value:e.jsxs("span",{className:"text-rose-400 font-bold",children:["-$",pe,"/rd"]})}].map((t,f)=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-400 text-[11px] font-bold uppercase tracking-wide",children:t.label}),e.jsx("div",{className:"text-sm font-bold text-slate-800",children:t.value})]},f))]})]})}),e.jsxs("section",{className:"w-full md:w-2/5 bg-slate-50/40 p-8 flex flex-col items-center justify-center relative overflow-hidden",children:[e.jsx("h4",{className:"absolute top-8 left-8 text-[10px] uppercase font-black tracking-[0.25em] text-slate-300",children:"Architecture"}),e.jsx("div",{className:`relative w-full max-w-[260px] p-1.5 rounded-[2.5rem] border-[3px] transition-all duration-700 shadow-xl ${p?"border-rose-200 bg-rose-50":V?"border-amber-200 bg-amber-50":"border-slate-200 bg-white"}`,children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:`p-4 rounded-2xl border-2 transition-all flex flex-col items-center gap-2 ${l?"bg-slate-100 border-slate-100 text-slate-400 grayscale":"bg-indigo-50/50 border-indigo-100 text-indigo-600 shadow-sm"}`,children:[e.jsx("span",{className:"text-[11px] font-black uppercase tracking-widest",children:"Web App"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex justify-between text-[10px] font-bold mb-1.5 uppercase tracking-tight opacity-80",children:[e.jsx("span",{children:"Resource Load"}),e.jsx("span",{children:l?"0%":`${(i*100).toFixed(0)}%`})]}),e.jsx("div",{className:"w-full bg-indigo-200 h-1.5 rounded-full overflow-hidden",children:e.jsx("div",{className:"bg-indigo-500 h-full transition-all duration-700 ease-out",style:{width:l?"0%":`${i*100}%`}})})]})]}),e.jsxs("div",{className:`p-4 rounded-2xl border-2 transition-all flex flex-col items-center gap-2 ${l?"bg-slate-100 border-slate-100 text-slate-400 grayscale":"bg-emerald-50/50 border-emerald-100 text-emerald-600 shadow-sm"}`,children:[e.jsx("span",{className:"text-[11px] font-black uppercase tracking-widest",children:"Database"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex justify-between text-[10px] font-bold mb-1.5 uppercase tracking-tight opacity-80",children:[e.jsx("span",{children:"Resource Load"}),e.jsx("span",{children:l?"0%":`${(Math.min(i*1.1,1)*100).toFixed(0)}%`})]}),e.jsx("div",{className:"w-full bg-emerald-200 h-1.5 rounded-full overflow-hidden",children:e.jsx("div",{className:"bg-emerald-500 h-full transition-all duration-700 ease-out",style:{width:l?"0%":`${Math.min(i*1.1,1)*100}%`}})})]})]}),e.jsxs("div",{className:"pt-2 flex justify-between gap-2 text-[10px] font-bold text-slate-500 uppercase tracking-tighter",children:[e.jsxs("div",{className:"flex-1 bg-slate-100 p-2 rounded-xl text-center",children:[ue," vCPU"]}),e.jsxs("div",{className:"flex-1 bg-slate-100 p-2 rounded-xl text-center",children:[me," GB RAM"]})]})]})}),e.jsx("p",{className:"mt-6 text-[10px] text-slate-400 font-black text-center leading-tight uppercase tracking-[0.2em] opacity-60",children:"Monolithic Topology"})]})]}),e.jsxs("footer",{className:"flex-shrink-0 h-44 p-6 sm:px-10 bg-slate-50/80",children:[e.jsx("h3",{className:"text-[11px] font-black text-slate-400 uppercase tracking-[0.2em] mb-3",children:"Event Stream Telemetry"}),e.jsx("div",{className:"bg-white border border-slate-100 rounded-2xl h-[calc(100%-24px)] overflow-y-auto text-[11px] p-4 shadow-inner flex flex-col gap-1.5 scrollbar-hide",children:G.length===0?e.jsx("div",{className:"p-4 text-slate-300 italic text-center font-bold uppercase tracking-widest",children:"Awaiting Initial Feed..."}):e.jsxs(e.Fragment,{children:[G.map((t,f)=>e.jsx("div",{className:`p-3 rounded-xl border-b border-transparent leading-relaxed ${t.type==="crash"?"bg-rose-50 text-rose-800 font-bold border-l-4 border-l-rose-500":t.type==="downtime"?"bg-amber-50 text-amber-800 font-medium":t.type==="warn"?"bg-orange-50 text-orange-900 font-bold":"bg-slate-50 text-slate-600"}`,children:t.text},f)),e.jsx("div",{ref:de})]})})]})]})]})}Be.createRoot(document.getElementById("root")).render(e.jsx(Ye,{}));
